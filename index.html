<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Hole in the Wall ‚Äì Pose Challenge</title>
    <link rel="stylesheet" href="style.css">
    <!-- MediaPipe Pose -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- M√†n h√¨nh Start -->
    <div id="startScreen" class="screen active">
        <div class="start-container">
            <div class="start-content">
                <h1 class="title">üéØ AI Hole in the Wall</h1>
                <h2 class="subtitle">Pose Challenge</h2>
                <p class="description">ƒê·ª©ng tr∆∞·ªõc camera v√† b·∫Øt ch∆∞·ªõc t∆∞ th·∫ø ƒë·ªÉ xuy√™n qua t∆∞·ªùng!</p>
                
                <!-- Camera Preview -->
                <div class="camera-preview-wrapper">
                    <div class="camera-preview">
                        <video id="previewVideo" autoplay playsinline muted></video>
                        <div class="body-frame body-frame-preview"></div>
                        <div class="camera-status" id="cameraStatus">
                            <span class="status-icon">üìπ</span>
                            <span class="status-text">ƒêang t·∫£i camera...</span>
                        </div>
                    </div>
                    <div class="preview-hint">
                        <p>üí° ƒê·∫£m b·∫£o b·∫°n ƒë·ª©ng trong khung h√¨nh v√† c√≥ ƒë·ªß √°nh s√°ng</p>
                    </div>
                </div>
                
                <button id="startBtn" class="btn btn-primary start-btn">
                    <span class="btn-text">B·∫Øt ƒê·∫ßu Game</span>
                    <span class="btn-icon">‚ñ∂</span>
                </button>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh Countdown -->
    <div id="countdownScreen" class="screen">
        <div class="container">
            <div id="countdownNumber" class="countdown">3</div>
            <p class="countdown-text">Chu·∫©n b·ªã...</p>
        </div>
    </div>

    <!-- M√†n h√¨nh Game -->
    <div id="gameScreen" class="screen">
        <div class="game-container">
            <!-- Header: Lives v√† Score -->
            <div class="game-header">
                <div class="lives-container">
                    <span class="label">M·∫°ng:</span>
                    <div id="lives" class="lives">
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                    </div>
                </div>
                <div class="score-container">
                    <span class="label">ƒêi·ªÉm:</span>
                    <span id="score" class="score">0</span>
                </div>
                <div class="round-container">
                    <span class="label">Round:</span>
                    <span id="round" class="round">1</span>
                </div>
                <div class="timer-container">
                    <span class="label">‚è±Ô∏è</span>
                    <span id="timer" class="timer">5</span>
                </div>
            </div>

            <!-- Main Game Area -->
            <div class="game-main">
                <!-- Camera View v·ªõi Skeleton -->
                <div class="camera-section">
                    <div class="video-wrapper">
                        <video id="video" autoplay playsinline></video>
                        <canvas id="outputCanvas"></canvas>
                        <div class="body-frame body-frame-game"></div>
                        <div id="similarityDisplay" class="similarity-display">
                            <span id="similarityText">0%</span>
                            <div id="thresholdHint" class="threshold-hint">C·∫ßn: 65%</div>
                        </div>
                    </div>
                </div>

                <!-- Wall v·ªõi Pose Silhouette -->
                <div class="wall-section">
                    <div id="wall" class="wall">
                        <canvas id="poseCanvas"></canvas>
                        <div class="wall-overlay"></div>
                    </div>
                    <div class="pose-hint">
                        <p>B·∫Øt ch∆∞·ªõc t∆∞ th·∫ø n√†y!</p>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh Game Over -->
    <div id="gameOverScreen" class="screen">
        <div class="container">
            <h1 class="title">Game Over!</h1>
            <div class="final-score">
                <p class="score-label">ƒêi·ªÉm cu·ªëi c√πng:</p>
                <p id="finalScore" class="final-score-value">0</p>
            </div>
            <button id="restartBtn" class="btn btn-primary">Ch∆°i L·∫°i</button>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confettiContainer"></div>
    
    <!-- Effect Overlays -->
    <div id="effectOverlay" class="effect-overlay"></div>
    <div id="scorePopup" class="score-popup">+1</div>
    <div id="lifeLostPopup" class="life-lost-popup">-1 ‚ù§Ô∏è</div>
    <div id="roundChangePopup" class="round-change-popup">Round <span id="roundChangeNumber">1</span></div>

    <!-- Scripts -->
    <script src="pose.js"></script>
    <script src="game.js"></script>
    <script src="main.js"></script>
</body>
</html>

